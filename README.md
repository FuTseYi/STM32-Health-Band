# Xieyi智能手环项目

![Star History Chart](https://api.star-history.com/svg?repos=FuTseYi/STM32-Health-Band&type=Date)

## 项目简介

这是一个基于STM32F103C8T6的智能手环开源项目，集成了多种健康监测功能，包括心率检测、血氧饱和度检测、体温检测、计步器以及跌倒检测等功能。设备通过ESP8266 WiFi模块连接手机APP，实现实时数据传输和远程监控。

## 主要功能

- 🫀 **心率检测** - 基于MAX30102传感器的光电容积脉搏波描记法
- 🩸 **血氧饱和度检测** - 实时监测血氧水平
- 🌡️ **体温检测** - 精确的体温监测
- 🚶 **计步功能** - 基于ADXL345三轴加速度传感器
- 🚨 **跌倒检测** - 智能跌倒报警系统
- 📱 **WiFi连接** - 通过ESP8266-01S模块连接手机APP
- 📺 **OLED显示** - 实时显示各项健康数据
- 🔔 **蜂鸣器报警** - 异常情况声音提醒

## 硬件组成

### 主控制器
- **STM32F103C8T6** - ARM Cortex-M3核心，主频72MHz

### 传感器模块
- **MAX30102** - 心率血氧传感器
- **ADXL345** - 三轴加速度传感器（用于计步和跌倒检测）

### 显示与通信
- **OLED显示屏** - SSD1306驱动，IIC接口，128x64分辨率
- **ESP8266-01S** - WiFi通信模块

### 其他组件
- **蜂鸣器** - 报警提示
- **电源管理模块**

## 软件架构

```
├── 1、代码/
│   ├── CORE/          # STM32核心文件
│   ├── FWLIB/         # STM32固件库
│   ├── HARDWAR/       # 硬件驱动层
│   │   ├── MAX30102.c # 心率血氧传感器驱动
│   │   ├── adxl345.c  # 加速度传感器驱动
│   │   ├── OLED.c     # OLED显示驱动
│   │   └── ...
│   ├── SYSTEM/        # 系统层代码
│   └── USER/          # 用户应用层
│       └── main.c     # 主程序
├── 2、PCB/            # PCB设计文件
├── 3、硬件资料/       # 硬件规格书和资料
├── 4、APP/            # 手机APP（易语言开发）
└── 5、原理图/         # 电路原理图
```

## 快速开始

### 硬件准备
1. 准备所有必需的硬件组件（详见硬件组成部分）
2. 按照原理图进行电路连接
3. 使用提供的PCB文件制作电路板

### 软件环境
- **开发环境**: Keil uVision5
- **编程语言**: C语言
- **编译器**: ARM-MDK

### 编译和烧录
1. 打开Keil工程文件：`1、代码/USER/Template.uvprojx`
2. 编译项目（确保没有错误）
3. 通过ST-Link或其他烧录器将程序烧录到STM32

### 手机APP安装
1. 将`4、APP/发布版_手环APP.apk`传输到安卓手机
2. 安装APK文件
3. 确保手机WiFi功能已开启

### 设备连接
1. 手环上电后，会创建WiFi热点
2. 手机连接到设备WiFi：
   - **账号**: WIFI
   - **密码**: 123456789
   
   或者：
   - **账号**: www  
   - **密码**: 12345678

3. 打开手机APP即可查看实时数据

## 核心算法

### 心率检测算法
采用峰值检测算法，通过分析MAX30102传感器的PPG信号来计算心率：
- 信号预处理和滤波
- 峰值检测
- 心率计算（基于峰间间隔）

### 血氧饱和度算法
基于红光和红外光的吸收比率：
- 双波长光电容积脉搏波信号采集
- R值计算（红光/红外光的AC/DC比值）
- SpO2计算

### 跌倒检测算法
基于加速度传感器数据：
- 三轴加速度阈值检测
- 运动状态分析
- 跌倒事件识别

## 技术特性

- ⚡ **低功耗设计** - 优化的电源管理
- 🔄 **实时监测** - 100ms数据采集周期
- 📊 **数据缓存** - 支持历史数据存储
- 🌐 **无线传输** - WiFi数据上传
- 🎯 **高精度** - 经过校准的传感器算法

## 开发说明

### 编译要求
- Keil uVision5 或更高版本
- ARM编译器 V5.06 或更高版本
- STM32F10x标准外设库

### 调试接口
- **串口调试**: USART1, 波特率115200
- **仿真器**: 支持ST-Link/J-Link

### 自定义配置
主要配置参数位于各个驱动头文件中，可根据硬件连接修改：
- GPIO引脚配置
- IIC接口配置  
- 传感器参数配置

## 文件说明

### 核心源文件
- `main.c` - 主程序，包含系统初始化和主循环
- `MAX30102.c/h` - 心率血氧传感器驱动
- `adxl345.c/h` - 三轴加速度传感器驱动
- `OLED.c/h` - OLED显示屏驱动

### 配置文件
- `stm32f10x_conf.h` - STM32外设库配置
- `stm32f10x_it.c` - 中断服务程序

## 性能指标

| 指标 | 规格 |
|------|------|
| 心率检测范围 | 60-100 BPM |
| 血氧检测精度 | ±2% |
| 温度检测精度 | ±0.5°C |
| 电池续航 | 约24小时 |
| WiFi传输距离 | 室内10米 |
| 显示更新频率 | 10Hz |

## 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 作者

**Xieyi** - 项目创建者和主要开发者

## 致谢

感谢以下开源项目和库：
- STM32标准外设库
- Keil开发环境
- 相关传感器厂商提供的参考代码

## 联系方式

如有问题或建议，欢迎通过以下方式联系：
- 提交Issue到本仓库
- 发送邮件（请在Issues中留言）

## 更新日志

### v1.0.0 (2025-06-25)
- 初始版本发布
- 实现基础心率、血氧、温度检测功能
- 添加计步和跌倒检测功能
- 完成WiFi数据传输
- 手机APP配套开发

---

**注意**: 本设备仅用于健康监测参考，不可用于医疗诊断。如有健康问题，请咨询专业医生。
