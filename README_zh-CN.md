# STM32 æ™ºèƒ½å¥åº·æ‰‹ç¯

<div align="center">

![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)
![Platform](https://img.shields.io/badge/platform-STM32F103-red.svg)
![Language](https://img.shields.io/badge/language-C-blue.svg)
![Status](https://img.shields.io/badge/status-stable-brightgreen.svg)

**ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å¼€æºæ™ºèƒ½å¥åº·æ‰‹ç¯é¡¹ç›®**

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [ç¡¬ä»¶è¯´æ˜](#-ç¡¬ä»¶è¯´æ˜) â€¢ [å¼€å‘æ–‡æ¡£](#-å¼€å‘æ–‡æ¡£) â€¢ [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)

[English](README.md) | **ä¸­æ–‡**

</div>

---

![Star History Chart](https://api.star-history.com/svg?repos=FuTseYi/STM32-Health-Band&type=Date)

## ğŸ“– é¡¹ç›®ç®€ä»‹

STM32-Health-Band æ˜¯ä¸€ä¸ªåŸºäº **STM32F103C8T6** å¾®æ§åˆ¶å™¨çš„å¼€æºæ™ºèƒ½å¥åº·æ‰‹ç¯é¡¹ç›®ã€‚è¯¥é¡¹ç›®é›†æˆäº†å¤šç§å¥åº·ç›‘æµ‹åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¿ƒç‡æ£€æµ‹ã€è¡€æ°§é¥±å’Œåº¦ç›‘æµ‹ã€ä½“æ¸©æµ‹é‡ã€è®¡æ­¥å™¨ä»¥åŠè·Œå€’æ£€æµ‹ç­‰ã€‚è®¾å¤‡é€šè¿‡ ESP8266 WiFi æ¨¡å—ä¸æ‰‹æœº APP å®ç°æ— çº¿é€šä¿¡ï¼Œå¯å®æ—¶æŸ¥çœ‹å¥åº·æ•°æ®å¹¶è¿›è¡Œè¿œç¨‹ç›‘æ§ã€‚

æœ¬é¡¹ç›®é€‚åˆåµŒå…¥å¼ç³»ç»Ÿå­¦ä¹ è€…ã€ç”µå­çˆ±å¥½è€…ä»¥åŠå¸Œæœ›äº†è§£å¯ç©¿æˆ´è®¾å¤‡å¼€å‘çš„å·¥ç¨‹å¸ˆã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ«€ **å¿ƒç‡ç›‘æµ‹** - åŸºäº MAX30102 ä¼ æ„Ÿå™¨çš„å…‰ç”µå®¹ç§¯è„‰ææ³¢æè®°æ³•ï¼ˆPPGï¼‰
- ğŸ©¸ **è¡€æ°§æ£€æµ‹** - å®æ—¶ç›‘æµ‹è¡€æ°§é¥±å’Œåº¦ï¼ˆSpO2ï¼‰
- ğŸŒ¡ï¸ **ä½“æ¸©æµ‹é‡** - ç²¾ç¡®çš„ä½“æ¸©ç›‘æµ‹åŠŸèƒ½
- ğŸš¶ **æ™ºèƒ½è®¡æ­¥** - åŸºäº ADXL345 ä¸‰è½´åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨çš„è®¡æ­¥ç®—æ³•
- ğŸš¨ **è·Œå€’æ£€æµ‹** - æ™ºèƒ½è·Œå€’è¯†åˆ«ä¸æŠ¥è­¦ç³»ç»Ÿ
- ğŸ“± **æ— çº¿è¿æ¥** - é€šè¿‡ ESP8266-01S æ¨¡å—è¿æ¥æ‰‹æœº APP
- ğŸ“º **å®æ—¶æ˜¾ç¤º** - OLED å±å¹•å®æ—¶æ˜¾ç¤ºå„é¡¹å¥åº·æ•°æ®
- ğŸ”” **å£°éŸ³æŠ¥è­¦** - å¼‚å¸¸æƒ…å†µèœ‚é¸£å™¨æé†’

### æŠ€æœ¯ç‰¹æ€§
- âš¡ **ä½åŠŸè€—è®¾è®¡** - ä¼˜åŒ–çš„ç”µæºç®¡ç†ï¼Œå»¶é•¿ç»­èˆªæ—¶é—´
- ğŸ”„ **å®æ—¶ç›‘æµ‹** - 100ms æ•°æ®é‡‡é›†å‘¨æœŸï¼Œå“åº”è¿…é€Ÿ
- ğŸ“Š **æ•°æ®å­˜å‚¨** - æ”¯æŒå†å²æ•°æ®ç¼“å­˜
- ğŸŒ **æ— çº¿ä¼ è¾“** - WiFi å®æ—¶æ•°æ®ä¸Šä¼ 
- ğŸ¯ **é«˜ç²¾åº¦ç®—æ³•** - ç»è¿‡æ ¡å‡†çš„ä¼ æ„Ÿå™¨ç®—æ³•ï¼Œç¡®ä¿æ•°æ®å‡†ç¡®æ€§

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¡¬ä»¶å‡†å¤‡

#### å¿…éœ€ç»„ä»¶
| ç»„ä»¶ | å‹å· | æ•°é‡ | è¯´æ˜ |
|------|------|------|------|
| ä¸»æ§èŠ¯ç‰‡ | STM32F103C8T6 | 1 | ARM Cortex-M3ï¼Œ72MHz |
| å¿ƒç‡è¡€æ°§ä¼ æ„Ÿå™¨ | MAX30102 | 1 | IIC æ¥å£ |
| åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨ | ADXL345 | 1 | ä¸‰è½´åŠ é€Ÿåº¦è®¡ |
| æ˜¾ç¤ºå± | OLED 128Ã—64 | 1 | SSD1306 é©±åŠ¨ |
| WiFi æ¨¡å— | ESP8266-01S | 1 | æ— çº¿é€šä¿¡ |
| èœ‚é¸£å™¨ | æ— æºèœ‚é¸£å™¨ | 1 | æŠ¥è­¦æç¤º |
| è°ƒè¯•å™¨ | ST-Link V2 | 1 | ç¨‹åºä¸‹è½½ä¸è°ƒè¯• |

è¯¦ç»†ç¡¬ä»¶æ¸…å•å’Œè¿æ¥è¯´æ˜è¯·å‚è€ƒ [ç¡¬ä»¶è¯´æ˜æ–‡æ¡£](docs/HARDWARE.md)

### è½¯ä»¶ç¯å¢ƒ

#### å¼€å‘å·¥å…·
- **IDE**: Keil uVision5ï¼ˆæ¨è v5.29 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰
- **ç¼–è¯‘å™¨**: ARM-MDK V5.06+
- **ä¸‹è½½å·¥å…·**: STM32 ST-LINK Utility æˆ– J-Link
- **ä¸²å£å·¥å…·**: ä»»æ„ä¸²å£è°ƒè¯•åŠ©æ‰‹ï¼ˆæ³¢ç‰¹ç‡ 115200ï¼‰

#### å›ºä»¶åº“
- STM32F10x æ ‡å‡†å¤–è®¾åº“ï¼ˆå·²åŒ…å«åœ¨é¡¹ç›®ä¸­ï¼‰

### ç¼–è¯‘ä¸çƒ§å½•

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/YourUsername/STM32-Health-Band.git
   cd STM32-Health-Band
   ```

2. **æ‰“å¼€å·¥ç¨‹**
   - ä½¿ç”¨ Keil uVision5 æ‰“å¼€ `firmware/USER/Template.uvprojx`

3. **ç¼–è¯‘é¡¹ç›®**
   - ç‚¹å‡» `Project` â†’ `Build Target` æˆ–æŒ‰ `F7`
   - ç¡®ä¿ç¼–è¯‘æ— é”™è¯¯å’Œè­¦å‘Š

4. **çƒ§å½•ç¨‹åº**
   - è¿æ¥ ST-Link åˆ° STM32 å¼€å‘æ¿
   - ç‚¹å‡» `Flash` â†’ `Download` æˆ–æŒ‰ `F8`

### æ‰‹æœº APP ä½¿ç”¨

1. **å®‰è£… APP**
   - å°† `mobile-app/å‘å¸ƒç‰ˆ_æ‰‹ç¯APP.apk` ä¼ è¾“åˆ° Android æ‰‹æœº
   - å®‰è£… APK æ–‡ä»¶ï¼ˆéœ€å…è®¸å®‰è£…æœªçŸ¥æ¥æºåº”ç”¨ï¼‰

2. **è¿æ¥è®¾å¤‡**
   - æ‰‹ç¯ä¸Šç”µåä¼šè‡ªåŠ¨åˆ›å»º WiFi çƒ­ç‚¹
   - æ‰‹æœºè¿æ¥åˆ°è®¾å¤‡ WiFiï¼š
     - **SSID**: `WIFI` / å¯†ç : `123456789`
     - æˆ– **SSID**: `www` / å¯†ç : `12345678`

3. **æŸ¥çœ‹æ•°æ®**
   - æ‰“å¼€æ‰‹æœº APP å³å¯å®æ—¶æŸ¥çœ‹å¥åº·æ•°æ®

## ğŸ”§ ç¡¬ä»¶è¯´æ˜

### ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STM32F103C8T6 ä¸»æ§                  â”‚
â”‚         (ARM Cortex-M3, 72MHz)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚         â”‚         â”‚         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â” â”Œâ”€â”€â”´â”€â”€â”€â” â”Œâ”€â”€â”´â”€â”€â”€â” â”Œâ”€â”€â”´â”€â”€â”€â”€â”
    â”‚MAX30102â”‚ â”‚ADXL345â”‚ â”‚ OLED â”‚ â”‚ESP8266â”‚
    â”‚å¿ƒç‡è¡€æ°§â”‚ â”‚åŠ é€Ÿåº¦ â”‚ â”‚ æ˜¾ç¤º â”‚ â”‚ WiFi  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¼•è„šè¿æ¥

| STM32 å¼•è„š | è¿æ¥è®¾å¤‡ | åŠŸèƒ½ |
|-----------|---------|------|
| PB8, PB9 | MAX30102 | IIC (SCL, SDA) |
| PA4, PA5 | ADXL345 | IIC (SCL, SDA) |
| PB6, PB7 | OLED | IIC (SCL, SDA) |
| PA9, PA10 | ESP8266 | UART (TX, RX) |
| PB5 | MAX30102 | ä¸­æ–­è¾“å…¥ |
| PC13 | èœ‚é¸£å™¨ | GPIO è¾“å‡º |

å®Œæ•´ç¡¬ä»¶è¯´æ˜è¯·æŸ¥çœ‹ [ç¡¬ä»¶è¯´æ˜æ–‡æ¡£](docs/HARDWARE.md)

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
STM32-Health-Band/
â”œâ”€â”€ firmware/                    # å›ºä»¶æºä»£ç 
â”‚   â”œâ”€â”€ CORE/                   # STM32 æ ¸å¿ƒæ–‡ä»¶
â”‚   â”œâ”€â”€ FWLIB/                  # STM32 å›ºä»¶åº“
â”‚   â”œâ”€â”€ HARDWAR/                # ç¡¬ä»¶é©±åŠ¨å±‚
â”‚   â”‚   â”œâ”€â”€ MAX30102.c/h        # å¿ƒç‡è¡€æ°§ä¼ æ„Ÿå™¨é©±åŠ¨
â”‚   â”‚   â”œâ”€â”€ adxl345.c/h         # åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨é©±åŠ¨
â”‚   â”‚   â”œâ”€â”€ OLED.c/h            # OLED æ˜¾ç¤ºé©±åŠ¨
â”‚   â”‚   â”œâ”€â”€ timer.c/h           # å®šæ—¶å™¨é©±åŠ¨
â”‚   â”‚   â””â”€â”€ IO_Init.c/h         # GPIO åˆå§‹åŒ–
â”‚   â”œâ”€â”€ SYSTEM/                 # ç³»ç»Ÿå±‚ä»£ç 
â”‚   â”‚   â”œâ”€â”€ delay.c/h           # å»¶æ—¶å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ sys.c/h             # ç³»ç»Ÿé…ç½®
â”‚   â”‚   â””â”€â”€ usart.c/h           # ä¸²å£é€šä¿¡
â”‚   â””â”€â”€ USER/                   # ç”¨æˆ·åº”ç”¨å±‚
â”‚       â””â”€â”€ main.c              # ä¸»ç¨‹åº
â”œâ”€â”€ hardware/                    # ç¡¬ä»¶ç›¸å…³æ–‡ä»¶
â”‚   â”œâ”€â”€ pcb/                    # PCB è®¾è®¡æ–‡ä»¶
â”‚   â”œâ”€â”€ schematics/             # ç”µè·¯åŸç†å›¾
â”‚   â””â”€â”€ datasheets/             # ç¡¬ä»¶æ•°æ®æ‰‹å†Œ
â”œâ”€â”€ mobile-app/                  # Android æ‰‹æœº APP
â”œâ”€â”€ docs/                        # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ CONTRIBUTING.md         # è´¡çŒ®æŒ‡å—
â”‚   â”œâ”€â”€ DEVELOPMENT.md          # å¼€å‘æ–‡æ¡£
â”‚   â”œâ”€â”€ HARDWARE.md             # ç¡¬ä»¶è¯´æ˜
â”‚   â””â”€â”€ BADGES.md               # é¡¹ç›®å¾½ç« 
â”œâ”€â”€ LICENSE                      # MIT è®¸å¯è¯
â”œâ”€â”€ README.md                    # è‹±æ–‡ README
â””â”€â”€ README_zh-CN.md             # ä¸­æ–‡ README
```

## ğŸ’» å¼€å‘æ–‡æ¡£

### æ ¸å¿ƒç®—æ³•

#### å¿ƒç‡æ£€æµ‹ç®—æ³•
é‡‡ç”¨å³°å€¼æ£€æµ‹ç®—æ³•ï¼Œé€šè¿‡åˆ†æ MAX30102 ä¼ æ„Ÿå™¨çš„ PPG ä¿¡å·è®¡ç®—å¿ƒç‡ï¼š
- ä¿¡å·é¢„å¤„ç†ä¸æ»¤æ³¢
- å³°å€¼æ£€æµ‹ä¸è¯†åˆ«
- å¿ƒç‡è®¡ç®—ï¼ˆåŸºäºå³°é—´é—´éš” RR-Intervalï¼‰

#### è¡€æ°§é¥±å’Œåº¦ç®—æ³•
åŸºäºçº¢å…‰å’Œçº¢å¤–å…‰çš„å¸æ”¶æ¯”ç‡ï¼š
```
R = (AC_Red / DC_Red) / (AC_IR / DC_IR)
SpO2 = 110 - 25 Ã— R
```

#### è·Œå€’æ£€æµ‹ç®—æ³•
åŸºäºä¸‰è½´åŠ é€Ÿåº¦æ•°æ®ï¼š
```
Total_G = âˆš(XÂ² + YÂ² + ZÂ²)
è·Œå€’åˆ¤å®š: Total_G > 3g æˆ– Total_G < 0.5g
```

è¯¦ç»†å¼€å‘æ–‡æ¡£è¯·å‚è€ƒ [å¼€å‘æ–‡æ¡£](docs/DEVELOPMENT.md)

### æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | è§„æ ¼ |
|------|------|
| å¿ƒç‡æ£€æµ‹èŒƒå›´ | 60-100 BPM |
| è¡€æ°§æ£€æµ‹ç²¾åº¦ | Â±2% |
| æ¸©åº¦æ£€æµ‹ç²¾åº¦ | Â±0.5Â°C |
| è®¡æ­¥ç²¾åº¦ | â‰¥95% |
| ç”µæ± ç»­èˆª | çº¦ 6-24 å°æ—¶ |
| WiFi ä¼ è¾“è·ç¦» | å®¤å†… 10-15 ç±³ |
| æ˜¾ç¤ºæ›´æ–°é¢‘ç‡ | 10Hz |
| æ•°æ®é‡‡é›†å‘¨æœŸ | 100ms |

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼æ— è®ºæ˜¯æŠ¥å‘Š Bugã€æå‡ºæ–°åŠŸèƒ½å»ºè®®ï¼Œè¿˜æ˜¯æäº¤ä»£ç æ”¹è¿›ã€‚

### å¦‚ä½•è´¡çŒ®
1. Fork æœ¬ä»“åº“
2. åˆ›å»ºæ‚¨çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ‚¨çš„æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ä¸€ä¸ª Pull Request

è¯¦ç»†è´¡çŒ®æŒ‡å—è¯·æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](docs/CONTRIBUTING.md)

### ä»£ç è§„èŒƒ
- å‡½æ•°å‘½åï¼šå°å†™å­—æ¯+ä¸‹åˆ’çº¿ `sensor_init()`
- å˜é‡å‘½åï¼šå°å†™å­—æ¯+ä¸‹åˆ’çº¿ `sensor_data`
- å®å®šä¹‰ï¼šå¤§å†™å­—æ¯+ä¸‹åˆ’çº¿ `MAX_BUFFER_SIZE`
- æ³¨é‡Šï¼šä½¿ç”¨ Doxygen é£æ ¼æ³¨é‡Š

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

æ‚¨å¯ä»¥è‡ªç”±åœ°ï¼š
- âœ… å•†ä¸šä½¿ç”¨
- âœ… ä¿®æ”¹
- âœ… åˆ†å‘
- âœ… ç§äººä½¿ç”¨

ä½†éœ€è¦ï¼š
- ğŸ“‹ åŒ…å«è®¸å¯è¯å’Œç‰ˆæƒå£°æ˜

## ğŸ‘¨â€ğŸ’» ä½œè€…

**è¬æ‡¿Shine** - *é¡¹ç›®åˆ›å»ºè€…å’Œä¸»è¦ç»´æŠ¤è€…*

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’Œèµ„æºï¼š
- [STM32 æ ‡å‡†å¤–è®¾åº“](https://www.st.com/)
- [Keil MDK-ARM](https://www.keil.com/)
- MAX30102ã€ADXL345 ä¼ æ„Ÿå™¨å‚å•†æä¾›çš„å‚è€ƒä»£ç 
- æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…

## ğŸ“ è”ç³»æ–¹å¼

- ğŸ“§ **Issues**: [æäº¤ Issue](https://github.com/YourUsername/STM32-Health-Band/issues)
- ğŸ’¬ **Discussions**: [å‚ä¸è®¨è®º](https://github.com/YourUsername/STM32-Health-Band/discussions)

## ğŸ“Š æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-01-03)
- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… å®ç°å¿ƒç‡ã€è¡€æ°§ã€ä½“æ¸©æ£€æµ‹åŠŸèƒ½
- âœ… æ·»åŠ è®¡æ­¥å’Œè·Œå€’æ£€æµ‹åŠŸèƒ½
- âœ… å®Œæˆ WiFi æ•°æ®ä¼ è¾“
- âœ… é…å¥— Android APP å¼€å‘å®Œæˆ
- ğŸ“ å®Œå–„é¡¹ç›®æ–‡æ¡£

---

<div align="center">

**âš ï¸ å…è´£å£°æ˜**

æœ¬è®¾å¤‡ä»…ç”¨äºå¥åº·ç›‘æµ‹å‚è€ƒå’Œå­¦ä¹ ç ”ç©¶ï¼Œä¸å¯ç”¨äºåŒ»ç–—è¯Šæ–­ã€‚  
å¦‚æœ‰å¥åº·é—®é¢˜ï¼Œè¯·å’¨è¯¢ä¸“ä¸šåŒ»ç–—æœºæ„ã€‚

**Made with â¤ï¸ by è¬æ‡¿Shine**

</div>
